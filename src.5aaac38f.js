parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({7:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t,r){var i=this;this.width=t,this.height=r,this.clear=function(){i.matrix.forEach(function(t){return t.fill(0)})},this.collides=function(t,r){return t.matrix.some(function(t,n){return t.some(function(t,e){return t&&0!==(i.matrix[n+r.y]&&i.matrix[n+r.y][e+r.x])})})},this.merge=function(t,r){t.matrix.forEach(function(t,n){t.forEach(function(t,e){t&&(i.matrix[n+r.y][e+r.x]=t)})})},this.sweep=function(t){for(var r=1,n=i.matrix.length-1;n>0;n--)if(i.matrix[n].every(function(t){return 0!==t})){var e=i.matrix.splice(n,1)[0].fill(0);i.matrix.unshift(e),n+=1,t.score+=10*r,r*=2}};for(var n=[];r--;)n.push(new Array(t).fill(0));this.matrix=n}}();exports.default=t;
},{}],8:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=[null,"#e5282e","#f8d517","#df2384","#274696","#ef7e18","#5cad2c","#2cb099"],e=function(){function e(r,i,a){var n=this;this.context=r,this.player=i,this.field=a,this.lastTime=0,this.run=function(t){void 0===t&&(t=0);var r=t-n.lastTime;n.lastTime=t,n.player.dropCounter+=r,n.player.dropCounter>e.dropInterval&&n.player.drop(),n.draw(),requestAnimationFrame(n.run)},this.draw=function(){n.context.fillStyle="#000",n.context.fillRect(0,0,n.context.canvas.width,n.context.canvas.height),n.drawMatrix(n.field.matrix,{x:0,y:0}),n.drawMatrix(n.player.piece.matrix,n.player.position)},this.drawMatrix=function(e,r){e.forEach(function(e,i){e.forEach(function(e,a){e&&(n.context.fillStyle=t[e],n.context.fillRect(a+r.x,i+r.y,1,1))})})},i.game=this,i.reset(),i.updateScore()}return e.dropInterval=1e3,e}();exports.default=e;
},{}],10:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.Direction=void 0;!function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right"}(e||(exports.Direction=e={}));var i=exports.KeyCode=void 0;!function(e){e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.W=87]="W",e[e.A=65]="A",e[e.S=83]="S",e[e.D=68]="D"}(i||(exports.KeyCode=i={}));var t=function(){return function(t){var o=this;this.piece=t,this.dropCounter=0,this.position={x:0,y:0},this.score=0,this.drop=function(){o.position.y+=1,o.game.field.collides(o.piece,o.position)&&(o.position.y-=1,o.game.field.merge(o.piece,o.position),o.reset(),o.game.field.sweep(o),o.updateScore()),o.dropCounter=0},this.inputController=function(t){switch(t.keyCode){case i.Left:case i.A:o.move(e.Left);break;case i.Right:case i.D:o.move(e.Right);break;case i.Down:case i.S:o.drop();break;case i.Up:case i.W:case i.Space:o.rotate()}},this.reset=function(){var e=Math.floor(o.piece.typesCount*Math.random());o.piece.matrix=o.piece.createMatrix(e),o.position.y=0,o.position.x=Math.floor(o.game.field.width/2)-Math.floor(o.piece.matrix.length/2),o.game.field.collides(o.piece,o.position)&&(o.game.field.clear(),o.score=0,o.updateScore())},this.updateScore=function(){document.getElementById("score").innerText="Score: "+o.score},this.move=function(e){o.position.x+=e,o.game.field.collides(o.piece,o.position)&&(o.position.x-=e)},this.rotate=function(){var i=o.position.x,t=1;for(o.piece.rotate(e.Right);o.game.field.collides(o.piece,o.position);)if(o.position.x+=t,(t=-(t>0?t+1:t-1))>o.piece.matrix.length)return o.piece.rotate(e.Left),void(o.position.x=i)}}}();exports.default=t;
},{}],9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Type=void 0;var t=require("./Player"),e=exports.Type=void 0;!function(t){t[t.I=0]="I",t[t.J=1]="J",t[t.L=2]="L",t[t.O=3]="O",t[t.S=4]="S",t[t.T=5]="T",t[t.Z=6]="Z"}(e||(exports.Type=e={}));var r=function(){function r(){var r=this;this.createMatrix=function(t){switch(t){case e.I:return[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]];case e.J:return[[0,2,0],[0,2,0],[2,2,0]];case e.L:return[[0,3,0],[0,3,0],[0,3,3]];case e.O:default:return[[4,4],[4,4]];case e.S:return[[0,5,5],[5,5,0],[0,0,0]];case e.T:return[[6,6,6],[0,6,0],[0,0,0]];case e.Z:return[[7,7,0],[0,7,7],[0,0,0]]}},this.rotate=function(e){var i;void 0===e&&(e=t.Direction.Right);for(var a=0;a<r.matrix.length;a++)for(var n=0;n<a;n++)i=[r.matrix[a][n],r.matrix[n][a]],r.matrix[n][a]=i[0],r.matrix[a][n]=i[1];e===t.Direction.Right?r.matrix.forEach(function(t){return t.reverse()}):r.matrix.reverse()},this.type=Math.floor(this.typesCount*Math.random()),this.matrix=this.createMatrix(this.type)}return Object.defineProperty(r.prototype,"typesCount",{get:function(){return Object.keys(e).length/2},enumerable:!0,configurable:!0}),r}();exports.default=r;
},{"./Player":10}],4:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.context=void 0;var e=require("./Field"),t=a(e),r=require("./Game"),n=a(r),u=require("./Piece"),d=a(u),o=require("./Player"),l=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var i=document.getElementById("tetris"),s=exports.context=i.getContext("2d");s.scale(20,20);var c=new t.default(12,20),f=new l.default(new d.default),v=new n.default(s,f,c);document.addEventListener("keydown",f.inputController),v.run();
},{"./Field":7,"./Game":8,"./Piece":9,"./Player":10}]},{},[4], null)
//# sourceMappingURL=/src.5aaac38f.map